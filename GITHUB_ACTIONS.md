# GitHub Actions - Автоматическая сборка и релизы

## Как это работает

### 1. Автоматический релиз при push тега

Когда вы создаете и пушите тег (например, `v1.0.0`), автоматически:
- Собирается приложение для Windows
- Создается релиз на GitHub
- Загружаются установочные файлы (.exe, .msi)

**Как создать релиз:**

```bash
# Обновите версию в src-tauri/Cargo.toml и tauri.conf.json
# Затем создайте тег:
git tag v1.0.0
git push origin v1.0.0
```

GitHub Actions автоматически соберет и создаст релиз.

### 2. Сборка при коммите

При каждом коммите в ветку `main` или `master`:
- Проверяется, что код компилируется
- Создаются артефакты сборки (доступны 7 дней)
- Можно скачать их из вкладки Actions на GitHub

## Настройка секретов

Для работы автоматических релизов нужно добавить секреты в GitHub:

1. Перейдите в Settings → Secrets and variables → Actions
2. Добавьте следующие секреты:

   - **TAURI_PRIVATE_KEY** - содержимое файла `~/.tauri/toolbox.key`
   - **TAURI_KEY_PASSWORD** - пароль для ключа (если использовали при генерации)

### Как получить приватный ключ:

```powershell
# На Windows:
Get-Content $env:USERPROFILE\.tauri\toolbox.key

# Скопируйте весь вывод и вставьте в секрет TAURI_PRIVATE_KEY
```

## Ручной запуск

Вы также можете запустить workflow вручную:

1. Перейдите на вкладку **Actions** в GitHub
2. Выберите workflow **Release**
3. Нажмите **Run workflow**
4. Выберите ветку и нажмите **Run workflow**

## Отладка

Если сборка не удалась:

1. Проверьте логи в разделе **Actions**
2. Убедитесь, что все секреты настроены правильно
3. Проверьте, что версия в `Cargo.toml` и `tauri.conf.json` совпадает с тегом

## Изменение настроек

Вы можете изменить workflow файлы:
- `.github/workflows/release.yml` - настройки релизов
- `.github/workflows/build-on-commit.yml` - настройки сборки при коммите

